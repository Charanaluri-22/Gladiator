{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/order.service\";\nimport * as i2 from \"@angular/common\";\nfunction ViewOrdersComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1, \" Loading Orders... \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ViewOrdersComponent_ng_container_26_ng_container_1_ng_container_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currency\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const course_r5 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(course_r5.courseType);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r5.courseDetails);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(8, 3, course_r5.coursePrice, \"INR\", \"symbol\", \"1.2-2\"));\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"badge badge-primary\": a0,\n    \"badge badge-success\": a1,\n    \"badge badge-danger\": a2\n  };\n};\nfunction ViewOrdersComponent_ng_container_26_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"td\")(19, \"span\", 6);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"td\")(22, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ViewOrdersComponent_ng_container_26_ng_container_1_Template_button_click_22_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const order_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.updateOrderStatus(order_r3.orderId, \"accepted\"));\n    });\n    i0.ɵɵtext(23, \"Accept\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ViewOrdersComponent_ng_container_26_ng_container_1_Template_button_click_24_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const order_r3 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.updateOrderStatus(order_r3.orderId, \"rejected\"));\n    });\n    i0.ɵɵtext(25, \"Reject\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(26, ViewOrdersComponent_ng_container_26_ng_container_1_ng_container_26_Template, 9, 8, \"ng-container\", 5);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const order_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵattribute(\"rowspan\", order_r3.courses.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(order_r3.orderId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"rowspan\", order_r3.courses.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate((order_r3.customer == null ? null : order_r3.customer.customerName) || \"N/A\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"rowspan\", order_r3.courses.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate((order_r3.customer == null ? null : order_r3.customer.user == null ? null : order_r3.customer.user.email) || \"N/A\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r3.courses[0] == null ? null : order_r3.courses[0].courseType);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r3.courses[0] == null ? null : order_r3.courses[0].courseDetails);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(14, 18, order_r3.courses[0] == null ? null : order_r3.courses[0].coursePrice, \"INR\", \"symbol\", \"1.2-2\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵattribute(\"rowspan\", order_r3.courses.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(17, 23, order_r3.orderPrice, \"INR\", \"symbol\", \"1.2-2\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵattribute(\"rowspan\", order_r3.courses.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(28, _c0, order_r3.status === \"pending\", order_r3.status === \"accepted\", order_r3.status === \"rejected\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(order_r3.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"rowspan\", order_r3.courses.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", order_r3.status === null);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", order_r3.status === null);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", order_r3.courses.slice(1));\n  }\n}\nfunction ViewOrdersComponent_ng_container_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ViewOrdersComponent_ng_container_26_ng_container_1_Template, 27, 32, \"ng-container\", 5);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.orders);\n  }\n}\nexport let ViewOrdersComponent = /*#__PURE__*/(() => {\n  class ViewOrdersComponent {\n    constructor(orderService) {\n      this.orderService = orderService;\n      this.orders = [];\n      this.isLoading = false;\n    }\n    ngOnInit() {\n      this.loadOrders();\n    }\n    loadOrders() {\n      this.isLoading = true;\n      this.orderService.viewAllOrders().subscribe(data => {\n        this.orders = data;\n        this.isLoading = false;\n      });\n    }\n    calculateTotalPrices() {\n      this.orders.forEach(order => {\n        order.orderPrice = order.courses.reduce((sum, course) => sum + course.coursePrice, 0);\n      });\n    }\n    updateOrderStatus(orderId, status) {\n      this.orderService.updateOrderStatus(orderId, status).subscribe(updatedOrder => {\n        this.orders = this.orders.map(order => order.orderId === orderId ? updatedOrder : order);\n      });\n    }\n  }\n  ViewOrdersComponent.ɵfac = function ViewOrdersComponent_Factory(t) {\n    return new (t || ViewOrdersComponent)(i0.ɵɵdirectiveInject(i1.OrderService));\n  };\n  ViewOrdersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ViewOrdersComponent,\n    selectors: [[\"app-view-orders\"]],\n    decls: 27,\n    vars: 2,\n    consts: [[1, \"container\", \"mt-4\"], [1, \"align-center\"], [\"class\", \"loading-bar alert alert-info\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"loading-bar\", \"alert\", \"alert-info\"], [4, \"ngFor\", \"ngForOf\"], [1, \"badge\", 3, \"ngClass\"], [1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"], [1, \"btn\", \"btn-danger\", 3, \"disabled\", \"click\"]],\n    template: function ViewOrdersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n        i0.ɵɵtext(2, \"Orders\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, ViewOrdersComponent_div_3_Template, 2, 0, \"div\", 2);\n        i0.ɵɵelementStart(4, \"table\")(5, \"thead\")(6, \"tr\")(7, \"th\");\n        i0.ɵɵtext(8, \"Order ID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"th\");\n        i0.ɵɵtext(10, \"Customer Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"th\");\n        i0.ɵɵtext(12, \"Customer Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"th\");\n        i0.ɵɵtext(14, \"Course Type\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"th\");\n        i0.ɵɵtext(16, \"Course Details\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"th\");\n        i0.ɵɵtext(18, \"Course Price\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"th\");\n        i0.ɵɵtext(20, \"Total Price\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"th\");\n        i0.ɵɵtext(22, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"th\");\n        i0.ɵɵtext(24, \"Actions\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(25, \"tbody\");\n        i0.ɵɵtemplate(26, ViewOrdersComponent_ng_container_26_Template, 2, 1, \"ng-container\", 3);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n        i0.ɵɵadvance(23);\n        i0.ɵɵproperty(\"ngIf\", ctx.orders.length);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i2.CurrencyPipe],\n    styles: [\".container[_ngcontent-%COMP%]{margin-top:40px;padding:20px;border-radius:8px;background-color:#fff;box-shadow:0 4px 8px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#1e3a8a;font-family:Arial,sans-serif}.loading-bar[_ngcontent-%COMP%]{text-align:center;padding:10px;background-color:#2563eb;color:#fff;font-weight:700}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#1e3a8a;color:#fff;padding:10px;font-family:Arial,sans-serif;font-weight:700}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:1px solid #1e3a8a}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f0f8ff}tr[_ngcontent-%COMP%]:hover{background-color:#dbeafe}.ng-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:0}.ng-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;font-family:Arial,sans-serif}.currency-symbol[_ngcontent-%COMP%]{font-weight:700;color:#1e3a8a}\"]\n  });\n  return ViewOrdersComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}