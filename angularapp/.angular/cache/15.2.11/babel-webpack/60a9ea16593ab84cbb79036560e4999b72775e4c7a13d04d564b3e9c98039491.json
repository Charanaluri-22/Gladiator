{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/review.service\";\nimport * as i2 from \"src/app/services/user-store.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction UserViewReviewsComponent_tr_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const rev_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r3 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rev_r2.customer == null ? null : rev_r2.customer.customerName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rev_r2.subject);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rev_r2.body);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rev_r2.rating);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 6, rev_r2.dateCreated));\n  }\n}\nfunction UserViewReviewsComponent_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1, \" Loading Reviews... \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let UserViewReviewsComponent = /*#__PURE__*/(() => {\n  class UserViewReviewsComponent {\n    constructor(service, userStoreService) {\n      this.service = service;\n      this.userStoreService = userStoreService;\n      this.reviews = [];\n      this.filteredReviews = [];\n      this.isLoading = false;\n      this.searchQuery = '';\n      this.sortField = 'customerName'; // Default sort field\n      this.sortDirection = 'asc'; // Default sort direction\n    }\n\n    ngOnInit() {\n      this.userStoreService.getUser().subscribe(user => {\n        this.userId = user.userId;\n        this.loadReviews();\n      });\n    }\n    loadReviews() {\n      this.isLoading = true;\n      this.service.getReviewsByUserId(this.userId).subscribe(data => {\n        this.reviews = data;\n        this.filteredReviews = data;\n        this.isLoading = false;\n        this.sortReviews();\n      });\n    }\n    searchReviews() {\n      this.filteredReviews = this.reviews.filter(review => {\n        var _a;\n        return ((_a = review.customer) === null || _a === void 0 ? void 0 : _a.customerName.toLowerCase().includes(this.searchQuery.toLowerCase())) || review.subject.toLowerCase().includes(this.searchQuery.toLowerCase()) || review.body.toLowerCase().includes(this.searchQuery.toLowerCase());\n      });\n      this.sortReviews();\n    }\n    sortReviews() {\n      this.filteredReviews.sort((a, b) => {\n        const fieldA = a[this.sortField].toString().toLowerCase();\n        const fieldB = b[this.sortField].toString().toLowerCase();\n        if (this.sortDirection === 'asc') {\n          return fieldA.localeCompare(fieldB);\n        } else {\n          return fieldB.localeCompare(fieldA);\n        }\n      });\n    }\n    onSortFieldChange(field) {\n      this.sortField = field;\n      this.sortReviews();\n    }\n    onSortDirectionChange(direction) {\n      this.sortDirection = direction;\n      this.sortReviews();\n    }\n  }\n  UserViewReviewsComponent.ɵfac = function UserViewReviewsComponent_Factory(t) {\n    return new (t || UserViewReviewsComponent)(i0.ɵɵdirectiveInject(i1.ReviewService), i0.ɵɵdirectiveInject(i2.UserStoreService));\n  };\n  UserViewReviewsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserViewReviewsComponent,\n    selectors: [[\"app-user-view-reviews\"]],\n    decls: 43,\n    vars: 5,\n    consts: [[\"type\", \"text\", \"placeholder\", \"Search reviews...\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"for\", \"sort-field\"], [\"id\", \"sort-field\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"customerName\"], [\"value\", \"subject\"], [\"value\", \"body\"], [\"value\", \"rating\"], [\"value\", \"dateCreated\"], [\"for\", \"sort-direction\"], [\"id\", \"sort-direction\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"asc\"], [\"value\", \"desc\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"loading-bar alert alert-info\", 4, \"ngIf\"], [1, \"loading-bar\", \"alert\", \"alert-info\"]],\n    template: function UserViewReviewsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\");\n        i0.ɵɵtext(1, \"View Reviews\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\")(3, \"input\", 0);\n        i0.ɵɵlistener(\"ngModelChange\", function UserViewReviewsComponent_Template_input_ngModelChange_3_listener($event) {\n          return ctx.searchQuery = $event;\n        })(\"input\", function UserViewReviewsComponent_Template_input_input_3_listener() {\n          return ctx.searchReviews();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"label\", 1);\n        i0.ɵɵtext(5, \"Sort by:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"select\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function UserViewReviewsComponent_Template_select_ngModelChange_6_listener($event) {\n          return ctx.sortField = $event;\n        })(\"change\", function UserViewReviewsComponent_Template_select_change_6_listener() {\n          return ctx.onSortFieldChange(ctx.sortField);\n        });\n        i0.ɵɵelementStart(7, \"option\", 3);\n        i0.ɵɵtext(8, \"Customer Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"option\", 4);\n        i0.ɵɵtext(10, \"Course Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"option\", 5);\n        i0.ɵɵtext(12, \"Feedback Comments\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"option\", 6);\n        i0.ɵɵtext(14, \"Rating\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"option\", 7);\n        i0.ɵɵtext(16, \"Date Creation\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"label\", 8);\n        i0.ɵɵtext(18, \"Direction:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"select\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function UserViewReviewsComponent_Template_select_ngModelChange_19_listener($event) {\n          return ctx.sortDirection = $event;\n        })(\"change\", function UserViewReviewsComponent_Template_select_change_19_listener() {\n          return ctx.onSortDirectionChange(ctx.sortDirection);\n        });\n        i0.ɵɵelementStart(20, \"option\", 10);\n        i0.ɵɵtext(21, \"Ascending\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"option\", 11);\n        i0.ɵɵtext(23, \"Descending\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(24, \"div\")(25, \"table\")(26, \"thead\")(27, \"tr\")(28, \"th\");\n        i0.ɵɵtext(29, \"S.No\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"th\");\n        i0.ɵɵtext(31, \"Customer Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"th\");\n        i0.ɵɵtext(33, \"Course Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"th\");\n        i0.ɵɵtext(35, \"Feedback Comments\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"th\");\n        i0.ɵɵtext(37, \"Rating\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"th\");\n        i0.ɵɵtext(39, \"Date Creation\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(40, \"tbody\");\n        i0.ɵɵtemplate(41, UserViewReviewsComponent_tr_41_Template, 14, 8, \"tr\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(42, UserViewReviewsComponent_div_42_Template, 2, 0, \"div\", 13);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchQuery);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.sortField);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngModel\", ctx.sortDirection);\n        i0.ɵɵadvance(22);\n        i0.ɵɵproperty(\"ngForOf\", ctx.filteredReviews);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel, i3.DatePipe],\n    styles: [\"table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif;margin-top:20px;background-color:#f0f0f0}thead[_ngcontent-%COMP%]{background-color:#1e3a8a;color:#fff}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;text-align:left}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#e0e0e0}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d0d0d0}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:1px solid #2563eb}h2[_ngcontent-%COMP%]{color:#1e3a8a;text-align:center}\"]\n  });\n  return UserViewReviewsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}